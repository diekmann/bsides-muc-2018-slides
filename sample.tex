\documentclass[aspectratio=169]{beamer}

\usepackage{blindtext}

\usetheme{Execushares}

\title{Formal Methods to the Rescue? Experiences Coding in a Theorem Prover}
\subtitle{\url{https://github.com/diekmann/} \  @popitter\_net}
\author{Cornelius Diekmann}
\date{April 9, 2018}

\setcounter{showSlideNumbers}{1}




\newcommand{\hairspace}{\hspace{1pt}}
\newcommand{\eg}{\mbox{e.\hairspace{}g.,} }
\newcommand{\ie}{\mbox{i.\hairspace{}e.,} }
\newcommand{\Ie}{\mbox{I.\hairspace{}e.,} }
\newcommand{\cf}{\mbox{cf.}\ }
\newcommand{\etal}{\mbox{et~al.}\ }

\usepackage{fancyvrb}

\usepackage{IEEEtrantools}

%https://tex.stackexchange.com/questions/220820/itemize-list-inside-a-tikzpicture-node
\usepackage{varwidth}

% math typesetting
% free variables
\newcommand{\mvar}[1]{\ensuremath{\mathit{#1}}}
% definitions and constants
\newcommand{\mdef}[1]{\ensuremath{\mathsf{#1}}}
% executable functions
\newcommand{\mfun}[1]{\mdef{#1}}
%datatype constructor (may appear in text)
\newcommand\mconstr[1]{\mdef{#1}}
%math control (if then else)
\newcommand\mctrl[1]{\ensuremath{\mathbf{#1}}}


\newcommand{\BigO}{\mathcal{O}}


\DeclareMathSymbol{\mlq}{\mathord}{operators}{``}
\DeclareMathSymbol{\mrq}{\mathord}{operators}{`'}


\newcommand\mdoubleplus{\ensuremath{\mathbin{+\mkern-10mu+}}}
\newcommand\lstapp{\ensuremath{\mathbin{:\mkern-1mu:\mkern-1mu:}}} %list append
\newcommand\lstcons{\ensuremath{\mathbin{:\mkern-1mu:}}} %list append


\newcommand{\free}[1]{\textcolor{DarkerBlue}{#1}}
\newcommand{\bound}[1]{\textcolor{DarkGreen}{#1}}
%\newcommand{\boundi}[1]{\textcolor{Green}{#1}}


\newcommand*\circled[1]{\tikz[baseline=-3pt, scale=0.5, every node/.style={scale=0.5}]{\node[shape=circle,draw,inner sep=1pt,minimum size=16pt] (char) {#1};}}

\newcommand\allow{\ensuremath{\textnormal{\circled{\large \textbf{\checkmark}}}}}
\newcommand\deny{\ensuremath{\textnormal{\circled{\large \textbf{\texttimes}}}}}
\newcommand\undecided{\ensuremath{\textnormal{\circled{\textnormal{\large \textbf{?}}}}}}

\newcommand\matchop[1]{\ensuremath{\mfun{match}\ {#1}}}
\newcommand\matches[1]{\ensuremath{\matchop\gamma \ #1 \ p}}
\newcommand\nmatches[1]{\ensuremath{\neg\; \matchop\gamma \ #1 \ p}}
\newcommand\bigstep[3]{\ensuremath{\free{\Gamma},\free{\gamma},\free{p} \vdash\big\langle #1,\; #2 \big\rangle \Rightarrow #3}}






\begin{document}
\setcounter{showProgressBar}{0}
\setcounter{showSlideNumbers}{0}

\frame{\titlepage}

\begin{frame}
	\frametitle{Contents}
	\begin{enumerate}
		\item Introduction \\ \textcolor{ExecusharesGrey}{\footnotesize\hspace{1em} The reasoning and background behind this theme}
		\item Lorem Text  \\ \textcolor{ExecusharesGrey}{\footnotesize\hspace{1em} Just some Lorem Ipsum for filler}
		\item Conclusions \\ \textcolor{ExecusharesGrey}{\footnotesize\hspace{1em} Some closing thoughts}
	\end{enumerate}
\end{frame}


\setcounter{framenumber}{0}
\setcounter{showProgressBar}{1}
\setcounter{showSlideNumbers}{1}
\section{Introduction}

\begin{frame}
	\frametitle{Why Beamer?}
	\begin{enumerate}
		\item LaTeX is great!
		\item Beamer is easy to use!
		\item Why not?
	\end{enumerate}
\end{frame}

\begin{frame}
	\frametitle{Why Custom Themes?}
	\begin{itemize}
		\item The default Beamer themes are outdated and visually displeasing
		\item There aren't many Beamer themes readily available online
		\item Making custom Beamer themes is easy!
	\end{itemize}
\end{frame}


\begin{frame}
	\frametitle{Theorem!}
		Assumes	
    \begin{itemize}
	    \item Unfolded $\free{\mvar{rs}}$ for $\free{\Gamma}$
	    \item $\free{\mvar{p}}$ is \texttt{NEW}% and has \texttt{SYN} set (if TCP)
	    \item $\bigstep{\free{\mvar{rs}}}{\undecided}{\allow}$
	    \item Let $(\free{V}, \free{E}) = \mfun{matrix}\ (\mdef{iifce}\ \free{p}, \mdef{oifce}\ \free{p}, \mdef{prot}\ \free{p}, \mdef{sport}\ \free{p}, \mdef{dport}\ \free{p})\ (\mfun{simplify}\ \free{\mvar{rs}})$
    \end{itemize}
    Shows%
    \begin{center}%
	    \vskip-3ex%
        \begin{IEEEeqnarray*}{l}
	    \exists \bound{\mvar{s}_\text{repr}}\ \bound{\mvar{d}_\text{repr}}\ \bound{\mvar{s}_\text{range}}\ \bound{\mvar{d}_\text{range}}.\ \ (\bound{\mvar{s}_\text{repr}}, \bound{\mvar{d}_\text{repr}}) \in  \mdef{set}\ \free{\mvar{E}} \  \wedge  \\
	    \qquad (\mfun{map\_of}\ \free{\mvar{V}})\ \bound{\mvar{s}_\text{repr}} = \mdef{Some}\ \bound{\mvar{s}_\text{range}} \ \wedge \ (\mdef{src}\ \free{\mvar{p}}) \in \bound{\mvar{s}_\text{range}} \ \wedge \\
	    \qquad (\mfun{map\_of}\ \free{\mvar{V}})\ \bound{\mvar{d}_\text{repr}} = \mdef{Some}\ \bound{\mvar{d}_\text{range}} \ \wedge \ (\mdef{dst}\ \free{\mvar{p}}) \in \bound{\mvar{d}_\text{range}}
	    \end{IEEEeqnarray*}
    \end{center}
    \medskip
    %Reads: If the firewall accepts a packet, we can look up source and destination IP in the graph.
	\end{frame}



\section{Lorem Ipsum}

\begin{frame}
	\frametitle{Lorem 1}
	\blindtext
\end{frame}

\begin{frame}
	\frametitle{Lorem 2}
	\blindtext
\end{frame}

\begin{frame}
	\frametitle{Lorem 3}
	\blindtext
\end{frame}



\section{Conclusions}

\begin{frame}
	\frametitle{Closing Thoughts}
	It took me over 3 years to code ~5k LoC. Not very impressive. However, that code is is correct! According to an independent self-conducted study (pun intended), it is also the best open-source iptables analyzer out there. The value is not the 5k LoC, but rather 5 Lines of Theorem which show that the 5k LoC are correct.

In this talk, I don’t want to walk you over the 5k lines of machine-generated Haskell code. Nor do I want to show you the 50k lines of formalization needed. I just want to show you the 5 Lines of the Theorem. Is this enough to convince you about the correctness of the iptables analyzer?

Neighbors, feel free to question anybody who does formalism for the sake of pretending to be a scientist. Formalism has a clear value: It is more expressive than our programming languages. And it is a nice language to precisely state the high-level requirements of our software. And here lies the true value: Computers understand rigorous formalism, too. Computers can check proofs, so you don’t have to. Just inspect 5 Lines of Theorem to get confidence in the correctness of 5k LoC. This approach seems to scale.*

*) given an infinite supply of PhD students who do the proofs for you.
\end{frame}



\appendix
\backupbegin
  \begin{frame}
    \frametitle{Backup slide 1}
    \blindtext
  \end{frame}
\backupend

\end{document}
